/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => VaultAdminPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/settings_tab.ts
var import_obsidian2 = require("obsidian");

// src/l10n/locale.ts
var import_obsidian = require("obsidian");

// src/l10n/locale/en.ts
var en_default = {
  //settings_tab.ts
  // Omnivore settings
  "Omnivore Settings": "Omnivore Settings",
  "Omnivore Folder": "Folder",
  "Omnivore TagAmender On Startup": "TagAmender On Startup",
  "Omnivore Tag Last Amend": "Tag Last Amend",
  "Reset to default": "Reset to default",
  "Dictionary Settings": "Dictionary Settings",
  "Language": "Language",
  // va chat
  "VA Chat View": "VA Chat",
  "VA Discovery View": "VA Discovery"
};

// src/l10n/locale/zh-cn.ts
var zh_cn_default = {
  //settings_tab.ts
  // Omnivore settings
  "Omnivore Settings": "\u6574\u7406 Omnivore \u6587\u6863\u4E2D\u7684\u5F02\u5E38\u6807\u7B7E",
  "Omnivore Folder": "Omnivore \u76EE\u5F55",
  "Omnivore Last TagAmender": "Omnivore \u6807\u7B7E\u6700\u540E\u4E00\u6B21\u6574\u7406\u65F6\u95F4\u6233",
  "Reset to default": "\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u8BBE\u7F6E",
  "Dictionary Settings": "\u8BCD\u5178\u8BBE\u7F6E",
  "Language": "\u8BED\u8A00"
};

// src/l10n/locale.ts
var localeMap = {
  en: en_default,
  "zh-cn": zh_cn_default
};
var locale = localeMap[import_obsidian.moment.locale()];
function t(str) {
  if (!locale) {
    console.error("Error: dictionary locale not found", import_obsidian.moment.locale());
  }
  return locale && locale[str] || en_default[str];
}

// src/settings_tab.ts
var VaultAdminSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h3", { text: t("Omnivore Settings") });
    new import_obsidian2.Setting(containerEl).setName(t("Omnivore Folder")).addText((text) => text.setPlaceholder("Enter your secret").setValue(this.plugin.settings.omnivoreFolder).onChange(async (value) => {
      this.plugin.settings.omnivoreFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName(t("Omnivore TagAmender On Startup")).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.amendOnStart).onChange(async (value) => {
        this.plugin.settings.amendOnStart = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Frequency").addText(
      (text) => text.setPlaceholder("Enter the frequency").setValue(this.plugin.settings.frequency.toString()).onChange(async (value) => {
        const frequency = parseInt(value);
        if (isNaN(frequency)) {
          new import_obsidian2.Notice("Frequency must be a positive integer");
          return;
        }
        this.plugin.settings.frequency = frequency;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName(t("Omnivore Tag Last Amend")).addMomentFormat(
      (momentFormat) => momentFormat.setPlaceholder("Last Sync").setValue(this.plugin.settings.amendAt).setDefaultFormat("yyyy-MM-dd'T'HH:mm:ss").onChange(async (value) => {
        this.plugin.settings.amendAt = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "Discovering Connections in Notes" });
    containerEl.createEl("h3", { text: "Chat with a Single Note or the Valut" });
  }
};

// src/tag_amender.ts
function is_omnivore_file(path, omnivoreFolder) {
  return path.startsWith(omnivoreFolder);
}
function is_need_amend(mtime, lastAmendAtTs) {
  return mtime >= lastAmendAtTs;
}
function convertStringToTs(dateStr) {
  return new Date(dateStr).getTime();
}
function tagfy(vault, file) {
  return vault.process(file, (data) => {
    console.log("amending tag for ", file.path);
    return data;
  });
}
async function amend_tag(plugin) {
  const lastAmendAt = plugin.settings.amendAt;
  const lastAmendAtTs = convertStringToTs(lastAmendAt);
  const omnivoreFolder = plugin.settings.omnivoreFolder;
  console.log(lastAmendAt, lastAmendAtTs, omnivoreFolder);
  const files = this.app.vault.getMarkdownFiles();
  for (let i = 0; i < files.length; i++) {
    const path = files[i].path;
    const mtime = files[i].stat.ctime;
    if (is_omnivore_file(path, omnivoreFolder) && is_need_amend(mtime, lastAmendAtTs)) {
      console.log(path);
      tagfy(this.app.vault, files[i]);
    }
  }
}

// src/view/va_chat.ts
var import_obsidian3 = require("obsidian");
var VIEW_TYPE_VA_CHAT = "va-chat-view";
var VAChatView = class extends import_obsidian3.ItemView {
  constructor(leaf) {
    super(leaf);
  }
  getViewType() {
    return VIEW_TYPE_VA_CHAT;
  }
  getDisplayText() {
    return t("VA Chat View");
  }
  async onOpen() {
    this.icon = "message-circle";
    const container = this.containerEl.children[1];
    container.empty();
    container.createEl("h4", { text: "VA CHAT view" });
  }
  async onClose() {
  }
};

// src/view/va_discovery.ts
var import_obsidian4 = require("obsidian");
var VIEW_TYPE_VA_DISCOVERY = "va-discovery-view";
var VADiscoveryView = class extends import_obsidian4.ItemView {
  constructor(leaf) {
    super(leaf);
  }
  getViewType() {
    return VIEW_TYPE_VA_DISCOVERY;
  }
  getDisplayText() {
    return t("VA Discovery View");
  }
  async onOpen() {
    this.icon = "link-2";
    const container = this.containerEl.children[1];
    container.empty();
    container.createEl("h4", { text: "VIEW_TYPE_VA_DISCOVERY view" });
  }
  async onClose() {
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  omnivoreFolder: "Omnivore",
  amendAt: "2023-05-01T00:00:00",
  amendOnStart: true,
  frequency: 1
};
var VaultAdminPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_VA_CHAT,
      (leaf) => new VAChatView(leaf)
    );
    this.registerView(
      VIEW_TYPE_VA_DISCOVERY,
      (leaf) => new VADiscoveryView(leaf)
    );
    const iconId = "VA:tag-amender";
    this.addRibbonIcon("book-marked", iconId, async (evt) => {
      new import_obsidian5.Notice("start to clean the tags in Omnivore folder!");
      amend_tag(this);
    });
    const discoveryIcon = "VA:discovery";
    this.addRibbonIcon("link-2", discoveryIcon, async (evt) => {
      this.openDiscoveryView();
    });
    const chatIcon = "VA:chat";
    this.addRibbonIcon("message-circle", chatIcon, async (evt) => {
      this.openChatView();
    });
    this.addSettingTab(new VaultAdminSettingTab(this.app, this));
    this.registerDomEvent(document, "click", (evt) => {
    });
  }
  onunload() {
  }
  async openChatView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_VA_CHAT);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      if (leaf) {
        await leaf.setViewState({ type: VIEW_TYPE_VA_CHAT, active: true });
      } else {
        console.error("Failed to create a new leaf for the chat view.");
        return;
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async openDiscoveryView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_VA_DISCOVERY);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      if (leaf) {
        await leaf.setViewState({ type: VIEW_TYPE_VA_DISCOVERY, active: true });
      } else {
        console.error("Leaf is null or undefined.");
        return;
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvc2V0dGluZ3NfdGFiLnRzIiwgInNyYy9sMTBuL2xvY2FsZS50cyIsICJzcmMvbDEwbi9sb2NhbGUvZW4udHMiLCAic3JjL2wxMG4vbG9jYWxlL3poLWNuLnRzIiwgInNyYy90YWdfYW1lbmRlci50cyIsICJzcmMvdmlldy92YV9jaGF0LnRzIiwgInNyYy92aWV3L3ZhX2Rpc2NvdmVyeS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBhZGRJY29uLCBXb3Jrc3BhY2VMZWFmLCBWaWV3Q3JlYXRvciB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB0IGZyb20gJ3NyYy9sMTBuL2xvY2FsZSc7XHJcbmltcG9ydCB7IFZhdWx0QWRtaW5TZXR0aW5nVGFiIH0gZnJvbSAnc3JjL3NldHRpbmdzX3RhYic7XHJcbmltcG9ydCB7IGFtZW5kX3RhZyB9IGZyb20gJ3NyYy90YWdfYW1lbmRlcic7XHJcblxyXG5pbXBvcnQgeyBWSUVXX1RZUEVfVkFfQ0hBVCwgVkFDaGF0VmlldyB9IGZyb20gJ3NyYy92aWV3L3ZhX2NoYXQnO1xyXG5pbXBvcnQgeyBWSUVXX1RZUEVfVkFfRElTQ09WRVJZLCBWQURpc2NvdmVyeVZpZXcgfSBmcm9tICdzcmMvdmlldy92YV9kaXNjb3ZlcnknO1xyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgVmF1bHRBZG1pblBsdWdpblNldHRpbmdzIHtcclxuXHRvbW5pdm9yZUZvbGRlcjogc3RyaW5nO1xyXG5cdGFtZW5kQXQ6IHN0cmluZztcclxuXHRhbWVuZE9uU3RhcnQ6IGJvb2xlYW47XHJcblx0ZnJlcXVlbmN5OiBudW1iZXI7XHJcblxyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWYXVsdEFkbWluUGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0b21uaXZvcmVGb2xkZXI6ICdPbW5pdm9yZScsXHJcblx0YW1lbmRBdDogJzIwMjMtMDUtMDFUMDA6MDA6MDAnLFxyXG5cdGFtZW5kT25TdGFydDogdHJ1ZSxcclxuXHRmcmVxdWVuY3k6IDEsXHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhdWx0QWRtaW5QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBWYXVsdEFkbWluUGx1Z2luU2V0dGluZ3M7XHJcblxyXG5cclxuXHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXHJcblx0XHRcdFZJRVdfVFlQRV9WQV9DSEFULFxyXG5cdFx0XHQobGVhZikgPT4gbmV3IFZBQ2hhdFZpZXcobGVhZilcclxuXHRcdCk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcclxuXHRcdFx0VklFV19UWVBFX1ZBX0RJU0NPVkVSWSxcclxuXHRcdFx0KGxlYWYpID0+IG5ldyBWQURpc2NvdmVyeVZpZXcobGVhZilcclxuXHRcdCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHRcdGNvbnN0IGljb25JZCA9ICdWQTp0YWctYW1lbmRlcidcclxuXHRcdC8vIFRoaXMgY3JlYXRlcyBhbiBpY29uIGluIHRoZSBsZWZ0IHJpYmJvbi5cclxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImJvb2stbWFya2VkXCIsIGljb25JZCwgYXN5bmMgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHQvLyBDYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIGljb24uXHJcblx0XHRcdC8vIFx1NUJGOVx1NzZFRVx1NUY1NVx1OTFDQ1x1NzY4NFx1NjI0MFx1NjcwOVx1NTE4NVx1NUJCOVx1OEZEQlx1ODg0Q3RhZ1x1NjU3NFx1NzQwNlx1MzAwMlxyXG5cdFx0XHRuZXcgTm90aWNlKCdzdGFydCB0byBjbGVhbiB0aGUgdGFncyBpbiBPbW5pdm9yZSBmb2xkZXIhJyk7XHJcblx0XHRcdGFtZW5kX3RhZyh0aGlzKTtcclxuXHRcdH0pXHJcblxyXG5cclxuXHRcdGNvbnN0IGRpc2NvdmVyeUljb24gPSAnVkE6ZGlzY292ZXJ5J1xyXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKFwibGluay0yXCIsIGRpc2NvdmVyeUljb24sIGFzeW5jIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0dGhpcy5vcGVuRGlzY292ZXJ5VmlldygpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3QgY2hhdEljb24gPSAnVkE6Y2hhdCdcclxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcIm1lc3NhZ2UtY2lyY2xlXCIsIGNoYXRJY29uLCBhc3luYyAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdHRoaXMub3BlbkNoYXRWaWV3KCk7XHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVmF1bHRBZG1pblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHQvLyBJZiB0aGUgcGx1Z2luIGhvb2tzIHVwIGFueSBnbG9iYWwgRE9NIGV2ZW50cyAob24gcGFydHMgb2YgdGhlIGFwcCB0aGF0IGRvZXNuJ3QgYmVsb25nIHRvIHRoaXMgcGx1Z2luKVxyXG5cdFx0Ly8gVXNpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciB3aGVuIHRoaXMgcGx1Z2luIGlzIGRpc2FibGVkLlxyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdjbGljaycsIGV2dCk7XHJcblx0XHR9KTtcclxuXHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHJcblx0fVxyXG5cclxuXHRhc3luYyBvcGVuQ2hhdFZpZXcoKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblxyXG5cdFx0bGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHRcdGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBX0NIQVQpO1xyXG5cclxuXHRcdGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBBIGxlYWYgd2l0aCBvdXIgdmlldyBhbHJlYWR5IGV4aXN0cywgdXNlIHRoYXRcclxuXHRcdFx0bGVhZiA9IGxlYXZlc1swXTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE91ciB2aWV3IGNvdWxkIG5vdCBiZSBmb3VuZCBpbiB0aGUgd29ya3NwYWNlLCBjcmVhdGUgYSBuZXcgbGVhZlxyXG5cdFx0XHQvLyBpbiB0aGUgcmlnaHQgc2lkZWJhciBmb3IgaXRcclxuXHRcdFx0bGVhZiA9IHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xyXG5cdFx0XHRpZiAobGVhZikge1xyXG5cdFx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX1ZBX0NIQVQsIGFjdGl2ZTogdHJ1ZSB9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGEgbmV3IGxlYWYgZm9yIHRoZSBjaGF0IHZpZXcuJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXCJSZXZlYWxcIiB0aGUgbGVhZiBpbiBjYXNlIGl0IGlzIGluIGEgY29sbGFwc2VkIHNpZGViYXJcclxuXHRcdGlmIChsZWFmKSB7XHJcblx0XHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgb3BlbkRpc2NvdmVyeVZpZXcoKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblxyXG5cdFx0bGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHRcdGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBX0RJU0NPVkVSWSk7XHJcblxyXG5cdFx0aWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIEEgbGVhZiB3aXRoIG91ciB2aWV3IGFscmVhZHkgZXhpc3RzLCB1c2UgdGhhdFxyXG5cdFx0XHRsZWFmID0gbGVhdmVzWzBdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gT3VyIHZpZXcgY291bGQgbm90IGJlIGZvdW5kIGluIHRoZSB3b3Jrc3BhY2UsIGNyZWF0ZSBhIG5ldyBsZWFmXHJcblx0XHRcdC8vIGluIHRoZSByaWdodCBzaWRlYmFyIGZvciBpdFxyXG5cdFx0XHRsZWFmID0gd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XHJcblx0XHRcdGlmIChsZWFmKSB7XHJcblx0XHRcdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBWSUVXX1RZUEVfVkFfRElTQ09WRVJZLCBhY3RpdmU6IHRydWUgfSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gXHU1M0VGXHU0RUU1XHU2REZCXHU1MkEwXHU0RTAwXHU0RTlCXHU2NUU1XHU1RkQ3XHU4QkIwXHU1RjU1XHU2MjE2XHU4MDA1XHU5NTE5XHU4QkVGXHU1OTA0XHU3NDA2XHU5MDNCXHU4RjkxXHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignTGVhZiBpcyBudWxsIG9yIHVuZGVmaW5lZC4nKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBcIlJldmVhbFwiIHRoZSBsZWFmIGluIGNhc2UgaXQgaXMgaW4gYSBjb2xsYXBzZWQgc2lkZWJhclxyXG5cdFx0aWYgKGxlYWYpIHtcclxuXHRcdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgU2FtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHApIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5zZXRUZXh0KCdXb2FoIScpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG4iLCAiaW1wb3J0IHsgUGx1Z2luU2V0dGluZ1RhYiwgQXBwLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHQgZnJvbSAnc3JjL2wxMG4vbG9jYWxlJztcclxuaW1wb3J0IFZhdWx0QWRtaW5QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBWYXVsdEFkbWluU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBWYXVsdEFkbWluUGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0QWRtaW5QbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiAgT21uaXZvcmUgT3B0aW9ucywgc3VjaCBhcyBmb2xkZXIgbG9jYXRpb24sIGxhc3QgdGltZSwgZXRjLlxyXG4gICAgICAgICoqL1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogdCgnT21uaXZvcmUgU2V0dGluZ3MnKSB9KVxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUodCgnT21uaXZvcmUgRm9sZGVyJykpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHNlY3JldCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub21uaXZvcmVGb2xkZXIpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub21uaXZvcmVGb2xkZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSh0KCdPbW5pdm9yZSBUYWdBbWVuZGVyIE9uIFN0YXJ0dXAnKSlcclxuICAgICAgICAgICAgLy8gLnNldERlc2MoXHJcbiAgICAgICAgICAgIC8vICAgICAnQ2hlY2sgdGhpcyBib3ggaWYgeW91IHdhbnQgdG8gc3luYyB3aXRoIE9tbml2b3JlIHdoZW4gdGhlIGFwcCBpcyBsb2FkZWQnLFxyXG4gICAgICAgICAgICAvLyApXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbWVuZE9uU3RhcnQpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbWVuZE9uU3RhcnQgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdGcmVxdWVuY3knKVxyXG4gICAgICAgICAgICAvLyAuc2V0RGVzYyhcclxuICAgICAgICAgICAgLy8gICAgICdFbnRlciB0aGUgZnJlcXVlbmN5IGluIG1pbnV0ZXMgdG8gc3luYyB3aXQnLFxyXG4gICAgICAgICAgICAvLyApXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGhlIGZyZXF1ZW5jeScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeS50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFsaWRhdGUgZnJlcXVlbmN5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyZXF1ZW5jeSA9IHBhcnNlSW50KHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZnJlcXVlbmN5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRnJlcXVlbmN5IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgZnJlcXVlbmN5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeSA9IGZyZXF1ZW5jeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5wbHVnaW4uc2NoZWR1bGVTeW5jKClcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUodCgnT21uaXZvcmUgVGFnIExhc3QgQW1lbmQnKSlcclxuICAgICAgICAgICAgLmFkZE1vbWVudEZvcm1hdCgobW9tZW50Rm9ybWF0KSA9PlxyXG4gICAgICAgICAgICAgICAgbW9tZW50Rm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdMYXN0IFN5bmMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbWVuZEF0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZWZhdWx0Rm9ybWF0KFwieXl5eS1NTS1kZCdUJ0hIOm1tOnNzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbWVuZEF0ID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdEaXNjb3ZlcmluZyBDb25uZWN0aW9ucyBpbiBOb3RlcycgfSlcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ2hhdCB3aXRoIGEgU2luZ2xlIE5vdGUgb3IgdGhlIFZhbHV0JyB9KVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNdWx0aVByb3BTZXR0aW5ncyB7XHJcbiAgICBrZWVwQXQ6IHN0cmluZztcclxuICAgIG9tbml2b3JlRm9sZGVyOiBzdHJpbmc7XHJcbiAgICBrZWVwT25TdGFydDogYm9vbGVhbjtcclxuICAgIGZyZXF1ZW5jeTogbnVtYmVyO1xyXG59IiwgImltcG9ydCB7IG1vbWVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgZW4gZnJvbSBcIi4vbG9jYWxlL2VuXCI7XHJcbmltcG9ydCB6aENOIGZyb20gXCIuL2xvY2FsZS96aC1jblwiO1xyXG5cclxuY29uc3QgbG9jYWxlTWFwOiB7IFtrOiBzdHJpbmddOiBQYXJ0aWFsPHR5cGVvZiBlbj4gfSA9IHtcclxuICAgIGVuLFxyXG4gICAgXCJ6aC1jblwiOiB6aENOLFxyXG59O1xyXG5cclxuY29uc3QgbG9jYWxlID0gbG9jYWxlTWFwW21vbWVudC5sb2NhbGUoKV07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0KHN0cjoga2V5b2YgdHlwZW9mIGVuKTogc3RyaW5nIHtcclxuICAgIGlmICghbG9jYWxlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBkaWN0aW9uYXJ5IGxvY2FsZSBub3QgZm91bmRcIiwgbW9tZW50LmxvY2FsZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKGxvY2FsZSAmJiBsb2NhbGVbc3RyXSkgfHwgZW5bc3RyXTtcclxufSIsICIvLyBFbmdsaXNoXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblxyXG4gICAgLy9zZXR0aW5nc190YWIudHNcclxuXHJcblxyXG4gICAgLy8gT21uaXZvcmUgc2V0dGluZ3NcclxuICAgIFwiT21uaXZvcmUgU2V0dGluZ3NcIjogXCJPbW5pdm9yZSBTZXR0aW5nc1wiLFxyXG4gICAgXCJPbW5pdm9yZSBGb2xkZXJcIjogXCJGb2xkZXJcIixcclxuICAgIFwiT21uaXZvcmUgVGFnQW1lbmRlciBPbiBTdGFydHVwXCI6IFwiVGFnQW1lbmRlciBPbiBTdGFydHVwXCIsXHJcbiAgICBcIk9tbml2b3JlIFRhZyBMYXN0IEFtZW5kXCI6IFwiVGFnIExhc3QgQW1lbmRcIixcclxuXHJcblxyXG4gICAgXCJSZXNldCB0byBkZWZhdWx0XCI6IFwiUmVzZXQgdG8gZGVmYXVsdFwiLFxyXG4gICAgJ0RpY3Rpb25hcnkgU2V0dGluZ3MnOiAnRGljdGlvbmFyeSBTZXR0aW5ncycsXHJcbiAgICAnTGFuZ3VhZ2UnOiAnTGFuZ3VhZ2UnLFxyXG5cclxuXHJcbiAgICAvLyB2YSBjaGF0XHJcbiAgICBcIlZBIENoYXQgVmlld1wiOiBcIlZBIENoYXRcIixcclxuICAgIFwiVkEgRGlzY292ZXJ5IFZpZXdcIjogXCJWQSBEaXNjb3ZlcnlcIixcclxuXHJcbn07IiwgIi8vIFx1N0I4MFx1NEY1M1x1NEUyRFx1NjU4N1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cclxuICAgIC8vc2V0dGluZ3NfdGFiLnRzXHJcblxyXG4gICAgXHJcbiAgICAvLyBPbW5pdm9yZSBzZXR0aW5nc1xyXG5cclxuICAgIFwiT21uaXZvcmUgU2V0dGluZ3NcIjogXCJcdTY1NzRcdTc0MDYgT21uaXZvcmUgXHU2NTg3XHU2ODYzXHU0RTJEXHU3Njg0XHU1RjAyXHU1RTM4XHU2ODA3XHU3QjdFXCIsXHJcbiAgICBcIk9tbml2b3JlIEZvbGRlclwiOiBcIk9tbml2b3JlIFx1NzZFRVx1NUY1NVwiLFxyXG4gICAgXCJPbW5pdm9yZSBMYXN0IFRhZ0FtZW5kZXJcIjogXCJPbW5pdm9yZSBcdTY4MDdcdTdCN0VcdTY3MDBcdTU0MEVcdTRFMDBcdTZCMjFcdTY1NzRcdTc0MDZcdTY1RjZcdTk1RjRcdTYyMzNcIixcclxuXHJcblxyXG5cclxuICAgIFwiUmVzZXQgdG8gZGVmYXVsdFwiOiBcIlx1OTFDRFx1N0Y2RVx1NEUzQVx1OUVEOFx1OEJBNFx1OEJCRVx1N0Y2RVwiLFxyXG4gICAgJ0RpY3Rpb25hcnkgU2V0dGluZ3MnOiAnXHU4QkNEXHU1MTc4XHU4QkJFXHU3RjZFJyxcclxuICAgICdMYW5ndWFnZSc6ICdcdThCRURcdThBMDAnLFxyXG59OyIsICJpbXBvcnQgeyBURmlsZSwgVmF1bHQgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IFZhdWx0QWRtaW5QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcclxuXHJcbmZ1bmN0aW9uIGlzX29tbml2b3JlX2ZpbGUocGF0aDogc3RyaW5nLCBvbW5pdm9yZUZvbGRlcjogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gcGF0aC5zdGFydHNXaXRoKG9tbml2b3JlRm9sZGVyKVxyXG59XHJcblxyXG5mdW5jdGlvbiBpc19uZWVkX2FtZW5kKG10aW1lOiBudW1iZXIsIGxhc3RBbWVuZEF0VHM6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIG10aW1lID49IGxhc3RBbWVuZEF0VHNcclxufVxyXG5cclxuZnVuY3Rpb24gY29udmVydFN0cmluZ1RvVHMoZGF0ZVN0cjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBuZXcgRGF0ZShkYXRlU3RyKS5nZXRUaW1lKCk7XHJcbn1cclxuXHJcblxyXG4vLyB0YWdmeSBcclxuZnVuY3Rpb24gdGFnZnkodmF1bHQ6IFZhdWx0LCBmaWxlOiBURmlsZSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gdmF1bHQucHJvY2VzcyhmaWxlLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdhbWVuZGluZyB0YWcgZm9yICcsIGZpbGUucGF0aClcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhbWVuZF90YWcocGx1Z2luOiBWYXVsdEFkbWluUGx1Z2luKSB7XHJcbiAgICBjb25zdCBsYXN0QW1lbmRBdCA9IHBsdWdpbi5zZXR0aW5ncy5hbWVuZEF0XHJcbiAgICBjb25zdCBsYXN0QW1lbmRBdFRzOiBudW1iZXIgPSBjb252ZXJ0U3RyaW5nVG9UcyhsYXN0QW1lbmRBdCk7XHJcbiAgICBjb25zdCBvbW5pdm9yZUZvbGRlciA9IHBsdWdpbi5zZXR0aW5ncy5vbW5pdm9yZUZvbGRlclxyXG5cclxuICAgIGNvbnNvbGUubG9nKGxhc3RBbWVuZEF0LCBsYXN0QW1lbmRBdFRzLCBvbW5pdm9yZUZvbGRlcilcclxuXHJcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBmaWxlc1tpXS5wYXRoXHJcbiAgICAgICAgY29uc3QgbXRpbWUgPSBmaWxlc1tpXS5zdGF0LmN0aW1lXHJcbiAgICAgICAgaWYgKGlzX29tbml2b3JlX2ZpbGUocGF0aCwgb21uaXZvcmVGb2xkZXIpICYmIGlzX25lZWRfYW1lbmQobXRpbWUsIGxhc3RBbWVuZEF0VHMpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhdGgpO1xyXG4gICAgICAgICAgICB0YWdmeSh0aGlzLmFwcC52YXVsdCwgZmlsZXNbaV0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB0IGZyb20gJ3NyYy9sMTBuL2xvY2FsZSc7XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBX0NIQVQgPSBcInZhLWNoYXQtdmlld1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZBQ2hhdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZikge1xyXG4gICAgc3VwZXIobGVhZik7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3VHlwZSgpIHtcclxuICAgIHJldHVybiBWSUVXX1RZUEVfVkFfQ0hBVDtcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlUZXh0KCkge1xyXG4gICAgcmV0dXJuIHQoXCJWQSBDaGF0IFZpZXdcIik7XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICB0aGlzLmljb24gPSBcIm1lc3NhZ2UtY2lyY2xlXCI7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xyXG4gICAgY29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICBjb250YWluZXIuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiVkEgQ0hBVCB2aWV3XCIgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgLy8gTm90aGluZyB0byBjbGVhbiB1cC5cclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHQgZnJvbSAnc3JjL2wxMG4vbG9jYWxlJztcclxuXHJcbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfVkFfRElTQ09WRVJZID0gXCJ2YS1kaXNjb3Zlcnktdmlld1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZBRGlzY292ZXJ5VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XHJcbiAgICBzdXBlcihsZWFmKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXdUeXBlKCkge1xyXG4gICAgcmV0dXJuIFZJRVdfVFlQRV9WQV9ESVNDT1ZFUlk7XHJcbiAgfVxyXG5cclxuICBnZXREaXNwbGF5VGV4dCgpIHtcclxuICAgIHJldHVybiB0KFwiVkEgRGlzY292ZXJ5IFZpZXdcIik7XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICB0aGlzLmljb24gPSBcImxpbmstMlwiO1xyXG5cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XHJcbiAgICBjb250YWluZXIuZW1wdHkoKTtcclxuICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJWSUVXX1RZUEVfVkFfRElTQ09WRVJZIHZpZXdcIiB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XHJcbiAgICAvLyBOb3RoaW5nIHRvIGNsZWFuIHVwLlxyXG4gIH1cclxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBaUk7OztBQ0FqSSxJQUFBQyxtQkFBdUQ7OztBQ0F2RCxzQkFBdUI7OztBQ0V2QixJQUFPLGFBQVE7QUFBQTtBQUFBO0FBQUEs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LE9BQU8sU0FBUyxHQUFHO0FBRXRCLGFBQU8sT0FBTyxDQUFDO0FBQUEsSUFDaEIsT0FBTztBQUdOLGFBQU8sVUFBVSxhQUFhLEtBQUs7QUFDbkMsVUFBSSxNQUFNO0FBQ1QsY0FBTSxLQUFLLGFBQWEsRUFBRSxNQUFNLHdCQUF3QixRQUFRLEtBQUssQ0FBQztBQUFBLE1BQ3ZFLE9BQU87QUFFTixnQkFBUSxNQUFNLDRCQUE0QjtBQUMxQztBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBR0EsUUFBSSxNQUFNO0FBQ1QsZ0JBQVUsV0FBVyxJQUFJO0FBQUEsSUFDMUI7QUFBQSxFQUNEO0FBQUEsRUFHQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUMxRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
